/**
 * skylark-langx-async - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(r,e){var n=e.define,require=e.require,t="function"==typeof n&&n.amd,o=!t&&"undefined"!=typeof exports;if(!t&&!n){var i={};n=e.define=function(r,e,n){"function"==typeof n?(i[r]={factory:n,deps:e.map(function(e){return function(r,e){if("."!==r[0])return r;var n=e.split("/"),t=r.split("/");n.pop();for(var o=0;o<t.length;o++)"."!=t[o]&&(".."==t[o]?n.pop():n.push(t[o]));return n.join("/")}(e,r)}),resolved:!1,exports:null},require(r)):i[r]={factory:null,resolved:!0,exports:n}},require=e.require=function(r){if(!i.hasOwnProperty(r))throw new Error("Module "+r+" has not been defined");var module=i[r];if(!module.resolved){var n=[];module.deps.forEach(function(r){n.push(require(r))}),module.exports=module.factory.apply(e,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(r,require){r("skylark-langx-async/async",["skylark-langx-ns"],function(r){return r.attach("langx.async")}),r("skylark-langx-async/deferred",["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects","./async"],function(r,e,n,t){"use strict";var o=Array.prototype.slice,i=e.proxy,s=r.makeArray,a=n.result,u=n.mixin;u(Promise.prototype,{always:function(r){return this.then(r,r),this},done:function(){for(var r=0;r<arguments.length;r++)this.then(arguments[r]);return this},fail:function(r){return this.catch(r),this}});var c=function(){var r=this;this.promise=l(new Promise(function(e,n){r._resolve=e,r._reject=n}))};function l(r){if(r.isResolved)return r;var e=!0,n=!1,t=!1,o=r.then(function(r){return t=!0,e=!1,r},function(r){throw n=!0,e=!1,r});o.isResolved=function(){return t},o.isPending=function(){return e},o.isRejected=function(){return n},o.state=function(){return t?"resolved":n?"rejected":"pending"};var i=[],s=[];return o.then=function(r,e,n){return n&&this.progress(n),l(Promise.prototype.then.call(this,r&&function(e){return e&&void 0!==e.__ctx__?r.apply(e.__ctx__,e):r(e)},e&&function(r){return r&&void 0!==r.__ctx__?e.apply(r.__ctx__,r):e(r)}))},o.progress=function(r){return i.forEach(function(e){r(e)}),s.push(r),this},o.pipe=o.then,o.notify=function(r){try{return i.push(r),s.forEach(function(e){return e(r)})}catch(r){this.reject(r)}return this},o}return c.prototype.resolve=function(r){var e=o.call(arguments);return this.resolveWith(null,e)},c.prototype.resolveWith=function(r,e){return(e=e?s(e):[]).__ctx__=r,this._resolve(e),this._resolved=!0,this},c.prototype.notify=function(r){var e=a(this,"promise");return e.notify(r),this},c.prototype.reject=function(r){var e=o.call(arguments);return this.rejectWith(null,e)},c.prototype.rejectWith=function(r,e){return(e=e?s(e):[]).__ctx__=r,this._reject(e),this._rejected=!0,this},c.prototype.isResolved=function(){var r=a(this,"promise");return r.isResolved()},c.prototype.isRejected=function(){var r=a(this,"promise");return r.isRejected()},c.prototype.state=function(){var r=a(this,"promise");return r.state()},c.prototype.then=function(r,e,n){var t=a(this,"promise");return t.then(r,e,n)},c.prototype.progress=function(r){var e=a(this,"promise");return e.progress(r)},c.prototype.catch=function(r){var e=a(this,"promise");return e.catch(r)},c.prototype.always=function(){var r=a(this,"promise");return r.always.apply(r,arguments),this},c.prototype.done=function(){var r=a(this,"promise");return r.done.apply(r,arguments),this},c.prototype.fail=function(r){var e=a(this,"promise");return e.fail(r),this},c.all=function(r){var e=new c;return Promise.all(r).then(e.resolve.bind(e),e.reject.bind(e)),a(e,"promise")},c.first=function(r){return l(Promise.race(r))},c.when=function(r,e,n,t){var o=r&&"function"==typeof r.then,s=o&&r instanceof Promise;if(!o)return arguments.length>1?e?e(r):r:(new c).resolve(r);if(!s){var a=new c(r.cancel);r.then(i(a.resolve,a),i(a.reject,a),a.notify),r=a.promise}return e||n||t?r.then(e,n,t):r},c.reject=function(r){var e=new c;return e.reject(r),e.promise},c.immediate=c.resolve=function(r){var e=new c;return e.resolve.apply(e,arguments),e.promise},c.promise=function(r){var e=new c;return r(e.resolve.bind(e),e.reject.bind(e),e.progress.bind(e)),e.promise},t.Deferred=c}),r("skylark-langx-async/each",["./async"],function(r){return r.each=function(r,e,n){if(0===r.length)return n(void 0,r);var t=new Array(r.length),o=0,i=!1;r.forEach(function(s,a){e(s,function(e,s){if(!i)return e?(i=!0,n(e)):(t[a]=s,(o+=1)===r.length?n(void 0,t):void 0)})})}}),r("skylark-langx-async/parallel",["skylark-langx-objects","./async","./deferred"],function(r,e,n){return e.parallel=function(e,t,o){var i=[];return o=o||null,t=t||[],r.each(e,function(r,e){i.push(e.apply(o,t))}),n.all(i)}}),r("skylark-langx-async/series",["skylark-langx-objects","./async","./deferred"],function(r,e,n){return e.series=function(e,t,o){var i=[],s=new n,a=s.promise;return o=o||null,t=t||[],s.resolve(),r.each(e,function(r,e){a=a.then(function(){return e.apply(o,t)}),i.push(a)}),n.all(i)}}),r("skylark-langx-async/waterful",["skylark-langx-objects","./async","./deferred"],function(r,e,n){return e.waterful=function(e,t,o){var i=new n,s=i.promise;return o=o||null,t=t||[],i.resolveWith(o,t),r.each(e,function(r,e){s=s.then(e)}),s}}),r("skylark-langx-async/main",["./async","./deferred","./each","./parallel","./series","./waterful"],function(r){return r}),r("skylark-langx-async",["skylark-langx-async/main"],function(r){return r})}(n),!t){var s=require("skylark-langx-ns");o?module.exports=s:e.skylarkjs=s}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-langx-async.js.map
